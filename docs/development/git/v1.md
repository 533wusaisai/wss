## ä»£ç æäº¤è§„èŒƒ 
> æäº¤ç»“æ„å¦‚ä¸‹ï¼š

```
<type>[scoped]: <description>

type:  ä¸ºäº†è¯´æ˜æœ¬æ¬¡æäº¤åšäº†é‚£äº›åŠŸèƒ½æ„å›¾
description: æ·»åŠ æœ¬æ¬¡æäº¤è¯´æ˜

typeåˆ†ä¸º  å¯é€‰æœ‰ä»¥ä¸‹ï¼š
- feat: è¡¨ç¤ºæ–°å¢äº†ä¸€ä¸ªåŠŸèƒ½
- fix: è¡¨ç¤ºä¿®å¤äº†ä¸€ä¸ª bug
- docs: è¡¨ç¤ºåªä¿®æ”¹äº†æ–‡æ¡£
- style: è¡¨ç¤ºä¿®æ”¹æ ¼å¼ã€ä¹¦å†™é”™è¯¯ã€ç©ºæ ¼ç­‰ä¸å½±å“ä»£ç é€»è¾‘çš„æ“ä½œ
- refactor: è¡¨ç¤ºä¿®æ”¹çš„ä»£ç ä¸æ˜¯æ–°å¢åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿®æ”¹ bugï¼Œæ¯”å¦‚ä»£ç é‡æ„
- perf: è¡¨ç¤ºä¿®æ”¹äº†æå‡æ€§èƒ½çš„ä»£ç 
- test: è¡¨ç¤ºä¿®æ”¹äº†æµ‹è¯•ä»£ç 
- build: è¡¨ç¤ºä¿®æ”¹äº†ç¼–è¯‘é…ç½®æ–‡ä»¶
- chore: æ—  src æˆ– test çš„æ“ä½œ
- revert: å›æ»šæ“ä½œ
```


## V1.0.0 ç‰ˆæœ¬æäº¤è§„èŒƒ

``` js
// ä¸¤ç§å½¢å¼å®‰è£… 
npm install -g commitizen
npm install --save-dev git-cz
commitizen init cz-conventional-changelog --save-dev --save-exact
#or
yarn add commitizen -g
yarn add git-cz --save-dev
commitizen init cz-conventional-changelog --save-dev --save-exact

# ä¿®æ”¹package.json
{
  "config": {
    "commitizen": {
      "path": "./node_modules/cz-conventional-changelog"
    }
  }
   "scripts": {
    	"commit": "git-cz"
	},
}

# è‡ªå®šä¹‰é…ç½® changelog.config.js  ç”¨äºæäº¤ç›‘æµ‹ typeç±»å‹

module.exports = {
  "disableEmoji": false,   // è¡¨æƒ…
  "list": [
    "test",   // æµ‹è¯•
    "feat",   // æ–°ç‰¹æ€§ or æ–°åŠŸèƒ½
    "fix",     // ä¿®å¤é—®é¢˜bug
    "chore", // é¡¹ç›®ä¾èµ–å‡çº§æˆ–ä¿®æ”¹
    "docs",  // é¡¹ç›®æ–‡æ¡£ä¿®æ”¹
    "refactor", // 
    "style",  // style æ ·å¼ä¿®æ”¹
    "ci",      // CI/COé…ç½®
    "perf"   // æ€§èƒ½ä¼˜åŒ–
  ],
  "maxMessageLength": 64,     // æœ€å¤§é•¿åº¦
  "minMessageLength": 3,      // æœ€çŸ­é•¿åº¦
  "questions": [
    "type",
    "scope",
    "subject",
    "body",
    "breaking",
    "issues",
    "lerna"
  ],
  "scopes": [],
  "types": {
    "chore": {
      "description": "æ„å»ºä¾èµ–/å·¥å…·ç­‰åŠŸèƒ½æ”¹åŠ¨",
      "emoji": "ğŸ¤–",
      "value": "chore"
    },
    "ci": {
      "description": "CI related changes",
      "emoji": "ğŸ¡",
      "value": "ci"
    },
    "docs": {
      "description": "æ–‡æ¡£æ›´æ–°",
      "emoji": "âœï¸",
      "value": "docs"
    },
    "feat": {
      "description": "æ–°ç‰¹æ€§/æ–°åŠŸèƒ½",
      "emoji": "ğŸ¸",
      "value": "feat"
    },
    "fix": {
      "description": "é—®é¢˜ä¿®å¤bug",
      "emoji": "ğŸ›",
      "value": "fix"
    },
    "perf": {
      "description": "æ€§èƒ½ä¼˜åŒ–",
      "emoji": "âš¡ï¸",
      "value": "perf"
    },
    "refactor": {
      "description": "ç»“æ„ä¼˜åŒ–",
      "emoji": "ğŸ’¡",
      "value": "refactor"
    },
    "release": {
      "description": "Create a release commit",
      "emoji": "ğŸ¹",
      "value": "release"
    },
    "style": {
      "description": "æ ·å¼ä¼˜åŒ–",
      "emoji": "ğŸ’„",
      "value": "style"
    },
    "test": {
      "description": "æ–°å¢æµ‹è¯•å†…å®¹",
      "emoji": "ğŸ’",
      "value": "test"
    }
  }
}

// è¯•è¯•æäº¤
git add . /(æ–‡ä»¶)
npm run commit

***** é‡ç‚¹ *****

// ç”Ÿæˆ CHANGELOG æ–‡ä»¶ æŸ¥çœ‹ç‰ˆæœ¬  è‡ªåŠ¨ç”Ÿæˆ tag ç‰ˆæœ¬  è¿›è¡Œç®¡ç†
npm install -S standard-version
#or
yarn add  standard-version -S

{
    "scirpt": {
        ...,
        "release": "standard-version"
    }
}

// æŸ¥çœ‹å½“å‰é…ç½®æ˜¯å¦ç”Ÿæ•ˆ
npm run release
#or
yarn release

# package.jsonä¸­å¿…é¡»æ·»åŠ 
{
    "repository": {
        "type": "git",
        "url": "github.com:533wusaisai/test-commit.git" // git ä»“åº“åœ°å€
    }
}

// ä»¥ä¸Šæœ‰ç¼ºé™· æ¯æ¬¡æäº¤ éœ€è¦ npm run commit æˆ– yarn commit

// ä¼˜åŒ–  ä½¿ç”¨æ­£å¸¸çš„git commit å‘½ä»¤
npm install @commitlint/cli -D
npm install @commitlint/config-conventional -D
npm install chalk
npm install lint-staged
npm install yorkie
#or
yarn add -D @commitlint/cli
yarn add @commitlint/config-conventional -D
yarn add chalk
yarn add lint-staged
yarn add yorkie

{
    "gitHooks": {
        "pre-commit": "lint-staged",
        // verify-commit-msg.js å¯åœ¨æ–‡ä»¶ä¸‹åˆ›å»º  æ­¤æ–‡ä»¶æ˜¯ä»¿ç…§vueå®˜ç½‘çš„æ–‡ä»¶è¿›è¡Œåˆ›å»º
        "commit-msg": "node verify-commit-msg.js"
    },
    "lint-staged": {
        "*.js": [
        "eslint --fix",
        "git add"
        ]
    }
}

// verify-commit-msg.js æ–‡ä»¶
const chalk = require("chalk");
const msgPath = process.env.GIT_PARAMS;
const msg = require("fs").readFileSync(msgPath, "utf-8").trim();

const commitRE =/^(revert: )?(feat|fix|polish|docs|style|refactor|perf|test|workflow|ci|chore|types|build)(\(.+\))?: .{1,50}/;

if (!commitRE.test(msg)) {
  console.log();
  console.error(
    `  ${chalk.bgRed.white(" ERROR ")} ${chalk.red(`invalid commit message format.`)}\n\n` +
      chalk.red(
        `  Proper commit message format is required for automated changelog generation. Examples:\n\n`
      ) +
      `    ${chalk.green(`feat(compiler): add 'comments' option`)}\n` +
      `    ${chalk.green(
        `fix(v-model): handle events on blur (close #28)`
      )}\n\n` +
      chalk.red(`  See .github/COMMIT_CONVENTION.md for more details.\n`) +
      chalk.red(
        `  You can also use ${chalk.cyan(
          `npm run commit`
        )} to interactively generate a commit message.\n`
      )
  );
  process.exit(1);
}

// ä¹‹åå¯ä»¥æŒ‰ç…§git commitæäº¤ æ¯æ¬¡éƒ½ä¼šè¿›è¡Œæ ¡éªŒ
```


## V2.0.0 ç‰ˆæœ¬æäº¤è§„èŒƒ
> æ­¤ç‰ˆæœ¬ä¸ä¸Šé¢æœ‰æ‰€ä¸åŒ

``` JS
// æ·»åŠ  commit æ ¡éªŒè§„åˆ™ 
npm install commitizen
npm install @commitlint/cli -D
npm install @commitlint/config-conventional -D
npm install husky
#or
yarn add commitizen
yarn add -D @commitlint/cli
yarn add @commitlint/config-conventional -D
yarn add husky

# ä¿®æ”¹package.json
{
  "config": {
    "commitizen": {
      "path": "./node_modules/cz-conventional-changelog"
    }
  }
   "scripts": {
       "prepare": "husky install",
	},
}

// ç”Ÿæˆ .husky é…ç½®æ–‡ä»¶
yarn prepare
#or
npm install prepare

// ç”Ÿæˆ pre-commit commit-msg pre-pushæ–‡ä»¶
npx husky add .husky/pre-commit "npm run lint"
npx husky add .husky/commit-msg 'npx --no-install commitlint --edit "$1"'
npx husky add .husky/pre-push 'npm run release'

// æ£€æµ‹
yarn add lint-staged
{
    "lint-staged": {
        // æ–‡ä»¶æ£€æµ‹é…ç½®   eslint ç­‰
        "*.less": [
          	"stylelint --fix"
        ],
        "*.{js,vue,ts,tsx}": [
          	"eslint --fix"
        ]
    }
}

// æ·»åŠ é…ç½®æ–‡ä»¶.commitlintrc.js
module.exports = {
    // commit lintæ ¡éªŒè§„åˆ™ç»§æ‰¿
    extends: ['@commitlint/config-conventional'],
    // è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™
    extends: ["@commitlint/config-conventional"],
    "type-enum": [
        2,
        "always",
        [
        "build", // ä¸»è¦ç›®çš„æ˜¯ä¿®æ”¹é¡¹ç›®æ„å»ºå†…å®¹
        "ci", // ä¿®æ”¹é›†æˆæµç¨‹
        "docs", // æ–‡æ¡£ä¿®æ”¹
        "feat", // æ–°åŠŸèƒ½
        "fix", //  bugä¿®å¤
        "merge", // åˆ†æ”¯åˆå¹¶
        "perf", // æ€§èƒ½ä½“éªŒä¼˜åŒ–
        "refactor", // é‡æ„
        "style", // ä¸å½±å“é€»è¾‘ä»£ç ä¿®æ”¹  ä¾‹å¦‚ï¼šæ ·å¼
        "test", // æ–°å¢æµ‹è¯•ç”¨ä¾‹æˆ–æ›´æ–°æµ‹è¯•åŠŸèƒ½
        "revert", // å›æ»šæŸä¸ªæ›´æ—©ä¹‹å‰çš„ç‰ˆæœ¬
        "chore", // ä¸å±äºä»¥ä¸Šç±»å‹çš„å…¶ä»–ç±»å‹
        ],
    ],
    "type-case": [0],
    "type-empty": [0],
    "scope-empty": [0],
    "scope-case": [0],
    "subject-full-stop": [0, "never"],
    "subject-case": [0, "never"],
    "header-max-length": [0, "always", 72],
};

***** é‡ç‚¹ *****

// ç”Ÿæˆ CHANGELOG æ–‡ä»¶ æŸ¥çœ‹ç‰ˆæœ¬  è‡ªåŠ¨ç”Ÿæˆ tag ç‰ˆæœ¬  è¿›è¡Œç®¡ç†
npm install -S standard-version
#or
yarn add  standard-version -S

{
    "scirpt": {
        "publishing": "np",   // éœ€è¦å•ç‹¬æ·»åŠ   ä¸»è¦æ˜¯æ£€æµ‹ git push è§„åˆ™   yarn add np
        "prepare": "husky install",    // ä¸Šé¢æœ‰é…ç½®
        "release": "yarn publishing",
        "changelog": "standard-version && standard-version -i CHANGELOG.md -o CHANGELOG.md",    
        // CHANGELOG ä¼šç”Ÿæˆä¸¤æ¬¡æäº¤è®°å½•  å¯åˆ é™¤ä¸€é¡¹
        "push:publish": "npm run build && git push --follow-tags origin master && npm publish"         
         // git push åœ¨ä¸»åˆ†æ”¯ä¸Šæ‰“tag 
    },
    "husky": {
        "hooks": {
        // æ¯æ¬¡commitæ–‡ä»¶æ£€æµ‹ 
        "pre-commit": "lint-staged",
        // é‡è¦ æ¯æ¬¡æäº¤è‡ªåŠ¨ç”Ÿæˆ CHANEGLOG ä¸éœ€è¦å¯åˆ é™¤
        "pre-push": "npm run release",
        "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
         #or
        //  ccommit ä¿¡æ¯ç›‘æµ‹
        "commit-msg": "commitlint -x @commitlint/config-conventional -e $HUSKY_GIT_PARAMS"
        }
    },
}

// æŸ¥çœ‹å½“å‰é…ç½®æ˜¯å¦ç”Ÿæ•ˆ
npm run release
#or
yarn release

# package.jsonä¸­å¿…é¡»æ·»åŠ 
{
    "repository": {
        "type": "git",
        "url": "github.com:533wusaisai/test-commit.git" // git ä»“åº“åœ°å€
    }
}

// å¦‚æœæƒ³åœ¨ CHAGELOG æ·»åŠ è¡¨æƒ…
yarn add conventional-changelog-gitmoji-config

// é…ç½®.versionrc.js
module.exports = {
    "types": [
        {
            "type": "feat",
            "section": "âœ¨ Features | æ–°åŠŸèƒ½",
            "hidden": false
        },
        {
            "type": "fix",
            "section": "ğŸ› Bug Fixes | Bug ä¿®å¤",
            "hidden": false
        },
        {
            "type": "init",
            "section": "ğŸ‰ Init | åˆå§‹åŒ–",
            "hidden": false
        },
        {
            "type": "docs",
            "section": "âœï¸ Documentation | æ–‡æ¡£",
            "hidden": false
        },
        {
            "type": "style",
            "section": "ğŸ’„ Styles | é£æ ¼",
            "hidden": false
        },
        {
            "type": "refactor",
            "section": "â™»ï¸ Code Refactoring | ä»£ç é‡æ„",
            "hidden": false
        },
        {
            "type": "perf",
            "section": "âš¡ Performance Improvements | æ€§èƒ½ä¼˜åŒ–",
            "hidden": false
        },
        {
            "type": "test",
            "section": "âœ… Tests | æµ‹è¯•",
            "hidden": false
        },
        {
            "type": "revert",
            "section": "âª Revert | å›é€€",
            "hidden": false
        },
        {
            "type": "build",
            "section": "ğŸ“¦â€ Build System | æ‰“åŒ…æ„å»º",
            "hidden": false
        },
        {
            "type": "chore",
            "section": "ğŸš€ Chore | æ„å»º/å·¥ç¨‹ä¾èµ–/å·¥å…·",
            "hidden": false
        },
        {
            "type": "ci",
            "section": "ğŸ‘· Continuous Integration | CI é…ç½®",
            "hidden": false
        }
    ]
}
```
